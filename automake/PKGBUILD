
pkgname=automake
pkgver=1.16.4
pkgrel=1
pkgdesc="A GNU tool for automatically creating Makefiles"
arch=('x86_64')
license=('GPL')
url="https://www.gnu.org/software/automake"
groups=('base-devel')
depends=('perl' 'bash')
makedepends=('autoconf')
checkdepends=('dejagnu' 'python3' 'java-environment' 'vala' 'emacs-nox' 'gcc-fortran')
source=("https://ftp.gnu.org/gnu/automake/${pkgname}-${pkgver}.tar.xz")
md5sums=('86e8e682bd74e6390a016c4d9c11267c')

build() {
  cd ${pkgname}-${pkgver}
  
  ./configure --prefix=/usr
  make
}

check(){
  cd ${pkgname}-${pkgver}
  # see http://www.linuxfromscratch.org/lfs/view/development/chapter06/automake.html
  #sed -i "s:./configure:LEXLIB=/usr/lib/libfl.a &:" t/lex-{clean,depend}-cxx.sh
  # 1 test fail > FAIL: t/subobj.sh
  make check PYTHON=/usr/bin/python3
}

package() {
  cd ${pkgname}-${pkgver}
  
  make DESTDIR=${pkgdir} install
}

